---
layout: default
title: Places
permalink: /places
---
<link href="{{ '/node_modules/mapbox-gl/dist/mapbox-gl.css'  | prepend: site.baseurl }}" rel="stylesheet" />
<script src="{{ '/node_modules/mapbox-gl/dist/mapbox-gl.js' | prepend: site.baseurl }}"></script>
<div id="map" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div>
<script src="{{ '/bounds.js' | prepend: site.baseurl }}"></script>
<script>
  mapboxgl.accessToken = 'pk.eyJ1IjoibmlnaHR3b2xmMTI5OCIsImEiOiJjanRyc3hwd28waXViNDNsYTJmMmpxYnZ4In0.urZfb99zLuhQoKd5QBZhEA';
  var map = new mapboxgl.Map({
    bounds: bounds,
    container: 'map',
    style: 'mapbox://styles/mapbox/dark-v10',
    hash: true,
    attributionControl: false
  });
  map.dragRotate.disable();
  map.touchZoomRotate.disableRotation();
  map.addControl(new mapboxgl.AttributionControl({
    compact: true
  }), 'bottom-right');
  map.on('load', function () {
    map.addSource('places', {
      "type": "geojson",
      "data": "{{ '/places.geojson' | prepend: site.baseurl }}"
    });
    map.addLayer({
      "id": "places",
      "type": "circle",
      "source": "places",
      "paint": {
        "circle-color": "#5dde95",
        "circle-opacity": 1,
        "circle-radius": ["interpolate",
          ["linear"],
          ["zoom"],
          10, 2.5,
          12, 5
        ],
        "circle-stroke-color": "white",
        "circle-stroke-opacity": ["interpolate",
          ["linear"],
          ["zoom"],
          10, 0,
          12, 1
        ],
        "circle-stroke-width": ["interpolate",
          ["linear"],
          ["zoom"],
          10, 0,
          12, 1
        ]
      }
    }, 'waterway-label');
  });
  map.on('click', 'places', function (e) {
    var str = '<div class="text-center" style="color: #000;">';
    str = str.concat('<h6 class="mb-1">' + e.features[0].properties.name + '</h6>');
    if (e.features[0].properties.address && e.features[0].properties.name != e.features[0].properties.address) str = str.concat('<p class="mb-1" style="line-height: 1.25em;">' + JSON.parse(e.features[0].properties.address).join('<br />') + '</p>');
    if (e.features[0].properties.id) str = str.concat(' <a href="https://foursquare.com/v/' + e.features[0].properties.id + '" class="rounded-circle" style="width: 40px; height: 40px; padding-top: 10px; display:inline-block; vertical-align:top; text-align:center; background-color: #F94877;"><img src="{{ '/node_modules/simple-icons/icons/foursquare.svg' | prepend: site.baseurl }}" style="filter: invert(1); width: 20px; height: 20px; vertical-align: top;"></a>');
    str = str.concat(' <a href="https://maps.apple.com/?sll=' + e.features[0].geometry.coordinates[1] + ',' + e.features[0].geometry.coordinates[0] + '&q=' + e.features[0].properties.name + '" class="rounded-circle" style="width: 40px; height: 40px; padding-top: 10px; display:inline-block; vertical-align:top; text-align:center; background-color: #999999;"><img src="{{ '/node_modules/simple-icons/icons/apple.svg' | prepend: site.baseurl }}" style="filter: invert(1); width: 20px; height: 20px; vertical-align: top;"></a> ');
    str = str.concat(' <a href="https://www.google.com/maps/search/?api=1&query=' + e.features[0].geometry.coordinates[1] + ',' + e.features[0].geometry.coordinates[0] + '" class="rounded-circle" style="width: 40px; height: 40px; padding-top: 10px; display:inline-block; vertical-align:top; text-align:center; background-color: #4285F4;"><img src="{{ '/node_modules/simple-icons/icons/google.svg' | prepend: site.baseurl }}" style="filter: invert(1); width: 20px; height: 20px; vertical-align: top;"></a> '); str = str.concat('</div>'); new mapboxgl.Popup().setLngLat(e.features[0].geometry.coordinates).setHTML(str).addTo(map);
  });
  map.on('mouseenter', 'places', function () {
    map.getCanvas().style.cursor = 'pointer';
  });
  map.on('mouseleave', 'places', function () {
    map.getCanvas().style.cursor = '';
  });
  $('.dropdown-menu').css({ "maxHeight": $('body').height() - $('nav').height() - 18 + 'px' });
  $('.dropdown-menu').css({ "overflow": "auto" });
  $(window).resize(function () {
    $('.dropdown-menu').css({ "maxHeight": $('body').height() - $('nav').height() - 18 + 'px' });
    $('.dropdown-menu').css({ "overflow": "auto" });
  });
</script>
