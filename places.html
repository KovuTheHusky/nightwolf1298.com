<!doctype html>
<html lang="en" style="height: 100%;">
  <head>
    <meta charset="utf-8">
    <meta name="description" content="A personal website for NightWolf1298.">
    <meta name="theme-color" content="#5dde95">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Places - NightWolf1298</title>
    <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="/images/favicon.png" sizes="any" type="image/png">
    <link rel="stylesheet" href="/assets/main.css">
    <script src="/node_modules/jquery/dist/jquery.min.js"></script>
    <script src="/node_modules/popper.js/dist/umd/popper.min.js"></script>
    <script src="/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="/node_modules/chart.js/dist/Chart.js"></script>
    <script>
      $(document).ready(function() {
        $.ajaxSetup({ cache: false });
      });
    </script>
  </head>
  <body style="background-color: #000; height: 100%">
    <nav class="navbar navbar-dark bg-transparent" style="z-index: 999; pointer-events: none;">
      <a class="navbar-brand" href="/" style="pointer-events: auto;">
        <img src="/images/avatar.png" alt="NightWolf1298" class="rounded-circle" width="50" height="50">
      </a>
      <div class="dropdown" style="pointer-events: auto;">
        <button class="navbar-toggler bg-dark" style="outline: none;" type="button" data-toggle="dropdown" aria-label="Navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="dropdown-menu dropdown-menu-right">
          <a class="dropdown-item " href="/">About</a>
          <a class="dropdown-item active" href="/places">Places</a>
          <div class="dropdown-divider"></div>
          <h6 class="dropdown-header">Furry</h6>
          <a class="dropdown-item " href="/fursona">Fursona</a>
          <a class="dropdown-item  disabled" href="/fursuit">Fursuit</a>
          <a class="dropdown-item " href="/conventions">Conventions</a>
          <div class="dropdown-divider"></div>
          <h6 class="dropdown-header">Gamer</h6>
          <a class="dropdown-item " href="/pokemongo">Pok√©mon GO</a>
          <div class="dropdown-divider"></div>
          <h6 class="dropdown-header">Other</h6>
          <a class="dropdown-item " href="/credits">Credits</a>
        </div>
      </div>
    </nav>

<link href="/node_modules/mapbox-gl/dist/mapbox-gl.css" rel="stylesheet" />
<script src="/node_modules/mapbox-gl/dist/mapbox-gl.js"></script>
<div id="map" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div>
<script src="/bounds.js"></script>
<script>
  mapboxgl.accessToken = 'pk.eyJ1IjoibmlnaHR3b2xmMTI5OCIsImEiOiJjanRyc3hwd28waXViNDNsYTJmMmpxYnZ4In0.urZfb99zLuhQoKd5QBZhEA';
  var map = new mapboxgl.Map({
    bounds: bounds,
    container: 'map',
    style: 'mapbox://styles/mapbox/dark-v10',
    hash: true,
    attributionControl: false
  });
  map.dragRotate.disable();
  map.touchZoomRotate.disableRotation();
  map.addControl(new mapboxgl.AttributionControl({
    compact: true
  }), 'bottom-right');
  map.on('load', function () {
    map.addSource('places', {
      "type": "geojson",
      "data": "/places.geojson"
    });
    map.addLayer({
      "id": "places",
      "type": "circle",
      "source": "places",
      "paint": {
        "circle-color": "#5dde95",
        "circle-opacity": 1,
        "circle-radius": ["interpolate",
          ["linear"],
          ["zoom"],
          10, 2.5,
          12, 5
        ],
        "circle-stroke-color": "white",
        "circle-stroke-opacity": ["interpolate",
          ["linear"],
          ["zoom"],
          10, 0,
          12, 1
        ],
        "circle-stroke-width": ["interpolate",
          ["linear"],
          ["zoom"],
          10, 0,
          12, 1
        ]
      }
    }, 'waterway-label');
  });
  map.on('click', 'places', function (e) {
    var str = '<div class="text-center" style="color: #000;">';
    str = str.concat('<h6 class="mb-1">' + e.features[0].properties.name + '</h6>');
    if (e.features[0].properties.address && e.features[0].properties.name != e.features[0].properties.address) str = str.concat('<p class="mb-1" style="line-height: 1.25em;">' + JSON.parse(e.features[0].properties.address).join('<br />') + '</p>');
    if (e.features[0].properties.id) str = str.concat(' <a href="https://foursquare.com/v/' + e.features[0].properties.id + '" class="rounded-circle" style="width: 40px; height: 40px; padding-top: 10px; display:inline-block; vertical-align:top; text-align:center; background-color: #F94877;"><img src="/node_modules/simple-icons/icons/foursquare.svg" style="filter: invert(1); width: 20px; height: 20px; vertical-align: top;"></a>');
    str = str.concat(' <a href="https://maps.apple.com/?sll=' + e.features[0].geometry.coordinates[1] + ',' + e.features[0].geometry.coordinates[0] + '&q=' + e.features[0].properties.name + '" class="rounded-circle" style="width: 40px; height: 40px; padding-top: 10px; display:inline-block; vertical-align:top; text-align:center; background-color: #999999;"><img src="/node_modules/simple-icons/icons/apple.svg" style="filter: invert(1); width: 20px; height: 20px; vertical-align: top;"></a> ');
    str = str.concat(' <a href="https://www.google.com/maps/search/?api=1&query=' + e.features[0].geometry.coordinates[1] + ',' + e.features[0].geometry.coordinates[0] + '" class="rounded-circle" style="width: 40px; height: 40px; padding-top: 10px; display:inline-block; vertical-align:top; text-align:center; background-color: #4285F4;"><img src="/node_modules/simple-icons/icons/google.svg" style="filter: invert(1); width: 20px; height: 20px; vertical-align: top;"></a> '); str = str.concat('</div>'); new mapboxgl.Popup().setLngLat(e.features[0].geometry.coordinates).setHTML(str).addTo(map);
  });
  map.on('mouseenter', 'places', function () {
    map.getCanvas().style.cursor = 'pointer';
  });
  map.on('mouseleave', 'places', function () {
    map.getCanvas().style.cursor = '';
  });
  $('.dropdown-menu').css({ "maxHeight": $('body').height() - $('nav').height() - 18 + 'px' });
  $('.dropdown-menu').css({ "overflow": "auto" });
  $(window).resize(function () {
    $('.dropdown-menu').css({ "maxHeight": $('body').height() - $('nav').height() - 18 + 'px' });
    $('.dropdown-menu').css({ "overflow": "auto" });
  });
</script>

</body>
</html>
